---
id: ui/components
category: ui
title: Création de composants UI
status: draft
tags: [components, ui, react, shadcn]
alwaysApply: false
description: Frame UI component creation and extension
---

# Création de composants UI

**Objectif** : Encadrer la création et l'extension des composants UI pour garantir cohérence, maintenabilité et accessibilité.

**Contexte** : À appliquer pour assurer la cohérence visuelle et fonctionnelle de l'interface.

## Explication

Les composants UI doivent suivre une structure standardisée et respecter les principes du design system.

### Principes fondamentaux

1. **1 composant = 1 fichier** : Chaque composant vit dans son propre fichier.
2. **Typage strict** : Tous les composants sont typés avec TypeScript.
3. **Exports nommés** : Pas d'export par défaut.
4. **Composition over configuration** : Privilégier la composition de composants simples.
5. **Accessibilité** : Respecter les normes ARIA et la navigation au clavier.

### Structure d'un composant UI

```ts
// 1. Imports externes
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

// 2. Imports internes
import { cn } from "@/lib/utils"

// 3. Variantes (si applicable)
const componentVariants = cva(
  "base-classes",
  {
    variants: {
      variant: {
        default: "...",
        secondary: "...",
      },
      size: {
        default: "...",
        sm: "...",
        lg: "...",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

// 4. Types et interfaces
export interface ComponentProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof componentVariants> {
  customProp?: string
}

// 5. Composant
export const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, variant, size, customProp, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(componentVariants({ variant, size, className }))}
        {...props}
      />
    )
  }
)

Component.displayName = "Component"
```

### Composition de composants

Créer des composants atomiques qui peuvent être composés :

```ts
// src/ui/components/card.tsx
export const Card = ({ className, ...props }: CardProps) => (
  <div className={cn("rounded-lg border bg-card", className)} {...props} />
)

export const CardHeader = ({ className, ...props }: CardHeaderProps) => (
  <div className={cn("flex flex-col space-y-1.5 p-6", className)} {...props} />
)

export const CardTitle = ({ className, ...props }: CardTitleProps) => (
  <h3 className={cn("text-lg font-semibold", className)} {...props} />
)

export const CardContent = ({ className, ...props }: CardContentProps) => (
  <div className={cn("p-6 pt-0", className)} {...props} />
)

// Usage
<Card>
  <CardHeader>
    <CardTitle>Card Title</CardTitle>
  </CardHeader>
  <CardContent>
    Card content here
  </CardContent>
</Card>
```

### Gestion des refs

Utiliser `React.forwardRef` pour permettre l'accès aux éléments DOM :

```ts
export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn("flex h-10 w-full rounded-md border", className)}
        ref={ref}
        {...props}
      />
    )
  }
)

Input.displayName = "Input"
```

### Polymorphisme avec `asChild`

Pour permettre de changer l'élément rendu :

```ts
import { Slot } from "@radix-ui/react-slot"

export interface ButtonProps {
  asChild?: boolean
  // ... autres props
}

export const Button = ({ asChild = false, ...props }: ButtonProps) => {
  const Comp = asChild ? Slot : "button"
  return <Comp {...props} />
}

// Usage
<Button asChild>
  <a href="/home">Go Home</a>
</Button>
```

## Exemple de mise en pratique

```ts
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

export const Badge = ({ className, variant, ...props }: BadgeProps) => {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}
```

## Variantes ou exceptions

- **Composants complexes** : Pour des composants avec logique métier, les placer dans `features/` plutôt que `ui/`.
- **Composants tiers** : Wrapper les composants de bibliothèques tierces pour standardiser l'API.
- **Animations complexes** : Utiliser Framer Motion pour des animations avancées.

## Liens / Références

- [React forwardRef](https://react.dev/reference/react/forwardRef)
- [Radix UI Primitives](https://www.radix-ui.com/primitives)
- [CVA Documentation](https://cva.style/docs)
- [Composition Pattern](https://react.dev/learn/passing-props-to-a-component#passing-jsx-as-children)
