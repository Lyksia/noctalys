---
id: ui/accessibility
category: ui
title: Accessibilité
status: draft
tags: [accessibility, a11y, aria, wcag]
alwaysApply: false
description: Ensure accessibility (ARIA, focus, contrast)
---

# Accessibilité

**Objectif** : Garantir l'accessibilité de l'interface en respectant les normes ARIA, la navigation au clavier et les contrastes.

**Contexte** : À appliquer pour assurer la cohérence visuelle et fonctionnelle de l'interface.

## Explication

L'accessibilité (a11y) est essentielle pour rendre l'application utilisable par tous, y compris les personnes en situation de handicap.

### Principes WCAG 2.1

1. **Perceptible** : L'information doit être présentable de différentes manières.
2. **Utilisable** : Les fonctionnalités doivent être utilisables au clavier.
3. **Compréhensible** : L'interface doit être prévisible et cohérente.
4. **Robuste** : Le contenu doit fonctionner avec les technologies d'assistance.

### Navigation au clavier

Toutes les interactions doivent être accessibles au clavier :

```ts
// ✅ Élément interactif accessible
<button
  onClick={handleClick}
  onKeyDown={(e) => {
    if (e.key === "Enter" || e.key === " ") {
      handleClick()
    }
  }}
>
  Click me
</button>

// ✅ Ordre de tabulation logique
<form>
  <input tabIndex={0} />
  <button tabIndex={0}>Submit</button>
</form>

// ❌ Éviter les divs cliquables sans accessibilité
<div onClick={handleClick}>Click me</div>
```

### Focus visible

Le focus doit toujours être visible :

```ts
// ✅ Focus ring visible
<button className="focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
  Button
</button>

// ✅ Focus visible pour les liens
<a href="#" className="focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary">
  Link
</a>

// Dans globals.css
:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}
```

### Attributs ARIA

Utiliser les attributs ARIA pour décrire les éléments :

```ts
// Labels
<button aria-label="Close dialog">
  <X className="h-4 w-4" />
</button>

// Description
<input
  type="email"
  aria-describedby="email-help"
/>
<p id="email-help">We'll never share your email.</p>

// États
<button aria-pressed={isActive}>
  Toggle
</button>

<div aria-expanded={isOpen}>
  Content
</div>

<button aria-disabled={isLoading}>
  Submit
</button>

// Live regions
<div aria-live="polite" aria-atomic="true">
  {notification}
</div>
```

### Rôles sémantiques

Utiliser les éléments HTML sémantiques :

```ts
// ✅ Bon : éléments sémantiques
<nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about">About</a></li>
  </ul>
</nav>

<main>
  <article>
    <h1>Title</h1>
    <p>Content</p>
  </article>
</main>

<footer>
  Footer content
</footer>

// ❌ Éviter les divs génériques
<div>
  <div>
    <div>Nav links</div>
  </div>
</div>
```

### Contrastes

Respecter les ratios de contraste WCAG :

```ts
// Niveau AA : ratio 4.5:1 pour le texte normal
// Niveau AAA : ratio 7:1 pour le texte normal

// ✅ Bon contraste
<p className="text-gray-900 dark:text-gray-100">
  High contrast text
</p>

// ❌ Mauvais contraste
<p className="text-gray-400 dark:text-gray-600">
  Low contrast text
</p>
```

### Textes alternatifs

Toujours fournir des alternatives textuelles :

```ts
// Images
<img src="logo.png" alt="Company logo" />

// Images décoratives
<img src="decoration.png" alt="" role="presentation" />

// Icônes avec signification
<button>
  <Save className="h-4 w-4" />
  <span className="sr-only">Save document</span>
</button>

// Screen reader only text
<span className="sr-only">Additional context</span>
```

### Formulaires accessibles

```ts
<form>
  {/* Label associé */}
  <label htmlFor="email">Email</label>
  <input
    id="email"
    type="email"
    aria-required="true"
    aria-invalid={hasError}
    aria-describedby={hasError ? "email-error" : undefined}
  />
  {hasError && (
    <p id="email-error" role="alert" className="text-sm text-destructive">
      Please enter a valid email
    </p>
  )}

  {/* Groupe de champs */}
  <fieldset>
    <legend>Choose your preference</legend>
    <label>
      <input type="radio" name="preference" value="light" />
      Light mode
    </label>
    <label>
      <input type="radio" name="preference" value="dark" />
      Dark mode
    </label>
  </fieldset>
</form>
```

### Modals et dialogs

```ts
import * as Dialog from "@radix-ui/react-dialog"

<Dialog.Root>
  <Dialog.Trigger asChild>
    <button>Open dialog</button>
  </Dialog.Trigger>
  <Dialog.Portal>
    <Dialog.Overlay className="fixed inset-0 bg-black/50" />
    <Dialog.Content
      className="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
      aria-describedby="dialog-description"
    >
      <Dialog.Title>Dialog title</Dialog.Title>
      <Dialog.Description id="dialog-description">
        Dialog description
      </Dialog.Description>
      <Dialog.Close asChild>
        <button aria-label="Close">
          <X className="h-4 w-4" />
        </button>
      </Dialog.Close>
    </Dialog.Content>
  </Dialog.Portal>
</Dialog.Root>
```

## Exemple de mise en pratique

```ts
import { Search, X } from "lucide-react"
import { Input } from "@/ui/components/input"
import { Button } from "@/ui/components/button"

export const SearchBar = () => {
  const [query, setQuery] = React.useState("")
  const [results, setResults] = React.useState<string[]>([])
  const searchInputRef = React.useRef<HTMLInputElement>(null)

  return (
    <div role="search">
      <label htmlFor="search-input" className="sr-only">
        Search products
      </label>
      <div className="relative">
        <Search
          className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"
          aria-hidden="true"
        />
        <Input
          id="search-input"
          ref={searchInputRef}
          type="search"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Search..."
          className="pl-10 pr-10"
          aria-label="Search products"
          aria-autocomplete="list"
          aria-controls="search-results"
          aria-expanded={results.length > 0}
        />
        {query && (
          <Button
            variant="ghost"
            size="icon"
            onClick={() => {
              setQuery("")
              searchInputRef.current?.focus()
            }}
            className="absolute right-2 top-1/2 h-6 w-6 -translate-y-1/2"
            aria-label="Clear search"
          >
            <X className="h-4 w-4" />
          </Button>
        )}
      </div>
      {results.length > 0 && (
        <ul
          id="search-results"
          role="listbox"
          className="mt-2 rounded-lg border bg-background shadow-lg"
          aria-label="Search results"
        >
          {results.map((result, index) => (
            <li
              key={result}
              role="option"
              aria-selected={false}
              className="cursor-pointer px-4 py-2 hover:bg-accent"
            >
              {result}
            </li>
          ))}
        </ul>
      )}
    </div>
  )
}
```

## Variantes ou exceptions

- **Applications complexes** : Pour des interfaces complexes, consulter un expert en accessibilité.
- **Composants tiers** : Vérifier l'accessibilité des composants de bibliothèques tierces.
- **Tests automatisés** : Utiliser des outils comme axe-core ou Pa11y pour détecter les problèmes.

## Liens / Références

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [MDN Accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility)
- [ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)
- [Radix UI Primitives](https://www.radix-ui.com/primitives) (accessible by default)
