---
id: ui/theme
category: ui
title: Theme Management
status: draft
tags: [theme, dark-mode, colors, tokens]
alwaysApply: false
description: Manage light/dark themes and color tokens
---

# Theme Management

**Objective**: Manage light/dark themes and color tokens consistently via Tailwind CSS.

**Context**: To apply to ensure visual and functional consistency of the interface.

## Explanation

The project natively supports light and dark mode thanks to Tailwind CSS and CSS variables.

### Theme Architecture

1. **CSS Variables**: Defined in `globals.css` or `tailwind.config.ts`
2. **Tailwind Classes**: `dark:` variants for dark mode
3. **Semantic Tokens**: Colors with meaning (primary, destructive, etc.)

### Color Configuration

```css
/* globals.css */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}
```

### Using Semantic Tokens

```ts
// ✅ Use semantic tokens
<div className="bg-background text-foreground">
  <button className="bg-primary text-primary-foreground">Primary</button>
  <button className="bg-secondary text-secondary-foreground">Secondary</button>
</div>

// ❌ Avoid direct colors
<div className="bg-white text-black dark:bg-gray-900 dark:text-white">
  {/* Repetitive and not maintainable */}
</div>
```

### Dark Mode with Tailwind

```ts
// Conditional classes for dark mode
<div className="bg-white dark:bg-gray-900">
  <h1 className="text-gray-900 dark:text-white">Title</h1>
  <p className="text-gray-600 dark:text-gray-400">Description</p>
</div>
```

### Theme Toggle

```ts
// src/features/theme/hooks/use-theme.ts
import { useEffect, useState } from "react"

export type Theme = "light" | "dark" | "system"

export const useTheme = () => {
  const [theme, setTheme] = useState<Theme>("system")

  useEffect(() => {
    const root = window.document.documentElement
    root.classList.remove("light", "dark")

    if (theme === "system") {
      const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light"
      root.classList.add(systemTheme)
    } else {
      root.classList.add(theme)
    }
  }, [theme])

  return { theme, setTheme }
}

// Toggle Component
import { Moon, Sun } from "lucide-react"
import { Button } from "@/ui/components/button"
import { useTheme } from "@/features/theme/hooks/use-theme"

export const ThemeToggle = () => {
  const { theme, setTheme } = useTheme()

  const toggleTheme = () => {
    setTheme(theme === "light" ? "dark" : "light")
  }

  return (
    <Button variant="ghost" size="icon" onClick={toggleTheme}>
      <Sun className="h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
      <Moon className="absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
      <span className="sr-only">Toggle theme</span>
    </Button>
  )
}
```

### Custom Colors

To add custom colors to the project:

```ts
// tailwind.config.ts
export default {
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        // Custom color
        brand: {
          50: "#f0f9ff",
          100: "#e0f2fe",
          500: "#0ea5e9",
          900: "#0c4a6e",
        },
      },
    },
  },
}
```

### User Preference

```ts
// Save preference
const saveThemePreference = (theme: Theme) => {
  localStorage.setItem("theme", theme)
}

// Load preference
const loadThemePreference = (): Theme => {
  return (localStorage.getItem("theme") as Theme) || "system"
}
```

## Practical Implementation Example

```ts
import { Moon, Sun, Monitor } from "lucide-react"
import { Button } from "@/ui/components/button"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/ui/components/dropdown-menu"
import { useTheme } from "@/features/theme/hooks/use-theme"

export const ThemeSelector = () => {
  const { theme, setTheme } = useTheme()

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="outline" size="icon">
          <Sun className="h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
          <Moon className="absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
          <span className="sr-only">Toggle theme</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme("light")}>
          <Sun className="mr-2 h-4 w-4" />
          Light
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme("dark")}>
          <Moon className="mr-2 h-4 w-4" />
          Dark
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme("system")}>
          <Monitor className="mr-2 h-4 w-4" />
          System
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

## Variants or Exceptions

- **Multiple themes**: For more than 2 themes (e.g., brand themes), use a CSS class-based approach.
- **Preview**: To preview themes, create a demo page with all components.
- **Transitions**: Avoid transitions on theme change (visual flash).

## Links / References

- [Tailwind Dark Mode](https://tailwindcss.com/docs/dark-mode)
- [CSS Custom Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/--*)
- [prefers-color-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme)
