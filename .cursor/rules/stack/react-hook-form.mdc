---
alwaysApply: false
description: Form management and validation
---

# React Hook Form

**Objective**: Standardize React Hook Form usage for form management and strict validation.

**Context**: To apply for standardizing the use of this technology in projects.

## Explanation

React Hook Form is the form management library used for all projects. It provides a performant, non-intrusive API compatible with Zod for validation.

**Key Principles:**

- **Performance**: uses uncontrolled refs by default (fewer re-renders).
- **Validation with Zod**: always pair with Zod via `zodResolver`.
- **Strict types**: type form data with `z.infer<>`.
- **Error handling**: display validation errors consistently.
- **Submission**: use `handleSubmit` for submission.

**Installation :**

```bash
npm install react-hook-form @hookform/resolvers
```

## Practical Implementation Example

**Simple form:**

```tsx
// src/features/auth/components/login-form.tsx
"use client";

import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";

const loginSchema = z.object({
  email: z.string().email("Invalid email"),
  password: z.string().min(8, "Password must be at least 8 characters"),
});

type LoginFormData = z.infer<typeof loginSchema>;

export function LoginForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<LoginFormData>({
    resolver: zodResolver(loginSchema),
  });

  const onSubmit = async (data: LoginFormData) => {
    console.log(data);
    // API call
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
      <div>
        <Input {...register("email")} type="email" placeholder="Email" />
        {errors.email && (
          <span className="text-sm text-red-500">{errors.email.message}</span>
        )}
      </div>

      <div>
        <Input {...register("password")} type="password" placeholder="Password" />
        {errors.password && (
          <span className="text-sm text-red-500">{errors.password.message}</span>
        )}
      </div>

      <Button type="submit" disabled={isSubmitting}>
        {isSubmitting ? "Loading..." : "Sign In"}
      </Button>
    </form>
  );
}
```

**Form with default values:**

```tsx
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { userSchema } from "../schemas";
import type { z } from "zod";

type UserFormData = z.infer<typeof userSchema>;

interface UserFormProps {
  defaultValues?: UserFormData;
}

export function UserForm({ defaultValues }: UserFormProps) {
  const { register, handleSubmit } = useForm<UserFormData>({
    resolver: zodResolver(userSchema),
    defaultValues,
  });

  const onSubmit = (data: UserFormData) => {
    console.log(data);
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("name")} placeholder="Name" />
      <input {...register("email")} type="email" placeholder="Email" />
      <button type="submit">Save</button>
    </form>
  );
}
```

**Controlled fields with `Controller`:**

```tsx
import { useForm, Controller } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { Select } from "@/components/ui/select";

export function ProductForm() {
  const { control, handleSubmit } = useForm({
    resolver: zodResolver(productSchema),
  });

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <Controller
        name="category"
        control={control}
        render={({ field }) => (
          <Select {...field}>
            <option value="electronics">Electronics</option>
            <option value="clothing">Clothing</option>
          </Select>
        )}
      />
      <button type="submit">Save</button>
    </form>
  );
}
```

**Custom error handling:**

```tsx
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";

export function SignupForm() {
  const {
    register,
    handleSubmit,
    setError,
    formState: { errors },
  } = useForm({
    resolver: zodResolver(signupSchema),
  });

  const onSubmit = async (data: SignupFormData) => {
    try {
      await createUser(data);
    } catch (error) {
      // Server error
      setError("root", {
        message: "Failed to create account. Please try again.",
      });
    }
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      {/* Fields */}
      {errors.root && (
        <div className="text-red-500">{errors.root.message}</div>
      )}
      <button type="submit">Sign Up</button>
    </form>
  );
}
```

**Reset et watch :**

```tsx
import { useForm } from "react-hook-form";

export function CommentForm() {
  const { register, handleSubmit, reset, watch } = useForm();

  const commentText = watch("comment"); // Watch a field

  const onSubmit = async (data) => {
    await submitComment(data);
    reset(); // Reset form after submission
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <textarea {...register("comment")} />
      <p>{commentText?.length || 0} / 500 characters</p>
      <button type="submit">Submit</button>
    </form>
  );
}
```

## Variants or Exceptions

- Very simple forms (1-2 fields) can use local state without React Hook Form.
- Existing projects with Formik can progressively migrate to React Hook Form.

## Links / References

- [React Hook Form Documentation](https://react-hook-form.com/)
- [Zod Resolver](https://react-hook-form.com/get-started#SchemaValidation)
- [React Hook Form Examples](https://react-hook-form.com/form-builder)
