---
alwaysApply: false
description: React email templates
---

# React Email

**Objectif** : Standardiser l'usage de React Email pour créer des templates d'e-mails en React avec une structure cohérente.

**Contexte** : À appliquer pour standardiser l'usage de cette technologie dans les projets.

## Explication

React Email permet de créer des templates d'e-mails en React, avec une API simple et un rendu HTML compatible avec tous les clients mail.

**Principes clés :**

- **Composants React** : écrire les templates comme des composants React.
- **Dossier `emails/`** : centraliser tous les templates dans `emails/`.
- **Rendu serveur** : utiliser `render()` pour générer le HTML côté serveur.
- **Preview** : utiliser le mode dev pour prévisualiser les e-mails.
- **Compatibilité** : les templates sont compatibles avec tous les clients mail.

**Installation :**

```bash
npm install react-email @react-email/components
```

**Configuration :**

```json
// package.json
{
  "scripts": {
    "email:dev": "email dev"
  }
}
```

## Exemple de mise en pratique

**Structure des templates :**

```
emails/
 ├─ welcome.tsx
 ├─ reset-password.tsx
 ├─ invoice.tsx
 └─ components/
     ├─ button.tsx
     └─ footer.tsx
```

**Template simple :**

```tsx
// emails/welcome.tsx
import {
  Html,
  Head,
  Body,
  Container,
  Heading,
  Text,
  Button,
} from "@react-email/components";

interface WelcomeEmailProps {
  userName: string;
}

export function WelcomeEmail({ userName }: WelcomeEmailProps) {
  return (
    <Html>
      <Head />
      <Body style={{ fontFamily: "Arial, sans-serif", backgroundColor: "#f4f4f4" }}>
        <Container style={{ padding: "20px", backgroundColor: "#ffffff" }}>
          <Heading style={{ color: "#333" }}>Welcome to Lyksia, {userName}!</Heading>
          <Text>Thank you for signing up. We're excited to have you on board.</Text>
          <Button
            href="https://lyksia.com/dashboard"
            style={{
              backgroundColor: "#3b82f6",
              color: "#ffffff",
              padding: "12px 24px",
              textDecoration: "none",
              borderRadius: "5px",
            }}
          >
            Go to Dashboard
          </Button>
        </Container>
      </Body>
    </Html>
  );
}

export default WelcomeEmail;
```

**Template avec composants réutilisables :**

```tsx
// emails/components/footer.tsx
import { Text, Link } from "@react-email/components";

export function EmailFooter() {
  return (
    <footer style={{ marginTop: "40px", textAlign: "center", color: "#888" }}>
      <Text style={{ fontSize: "12px" }}>
        © 2024 Lyksia. All rights reserved.
      </Text>
      <Text style={{ fontSize: "12px" }}>
        <Link href="https://lyksia.com/unsubscribe">Unsubscribe</Link>
      </Text>
    </footer>
  );
}
```

```tsx
// emails/invoice.tsx
import { Html, Body, Container, Heading, Text } from "@react-email/components";
import { EmailFooter } from "./components/footer";

interface InvoiceEmailProps {
  invoiceNumber: string;
  amount: number;
  dueDate: string;
}

export function InvoiceEmail({ invoiceNumber, amount, dueDate }: InvoiceEmailProps) {
  return (
    <Html>
      <Body style={{ fontFamily: "Arial, sans-serif" }}>
        <Container>
          <Heading>Invoice #{invoiceNumber}</Heading>
          <Text>Amount due: ${amount}</Text>
          <Text>Due date: {dueDate}</Text>
          <EmailFooter />
        </Container>
      </Body>
    </Html>
  );
}

export default InvoiceEmail;
```

**Rendu et envoi avec Nodemailer :**

```ts
// src/features/emails/services/send-welcome.ts
import { render } from "@react-email/render";
import { WelcomeEmail } from "@/emails/welcome";
import { sendEmail } from "./email-service";

export async function sendWelcomeEmail(userEmail: string, userName: string) {
  const html = render(<WelcomeEmail userName={userName} />);

  await sendEmail({
    to: userEmail,
    subject: "Welcome to Lyksia!",
    html,
  });
}
```

**Preview en mode dev :**

```bash
npm run email:dev
```

Ouvre un serveur local sur `http://localhost:3000` pour prévisualiser tous les templates.

**Template avec données dynamiques :**

```tsx
// emails/order-confirmation.tsx
import { Html, Body, Container, Heading, Text, Section } from "@react-email/components";

interface OrderItem {
  name: string;
  quantity: number;
  price: number;
}

interface OrderConfirmationEmailProps {
  orderNumber: string;
  items: OrderItem[];
  total: number;
}

export function OrderConfirmationEmail({
  orderNumber,
  items,
  total,
}: OrderConfirmationEmailProps) {
  return (
    <Html>
      <Body>
        <Container>
          <Heading>Order Confirmation #{orderNumber}</Heading>
          <Text>Thank you for your order!</Text>
          <Section>
            {items.map((item, index) => (
              <div key={index}>
                <Text>
                  {item.name} x {item.quantity} = ${item.price * item.quantity}
                </Text>
              </div>
            ))}
          </Section>
          <Text style={{ fontWeight: "bold" }}>Total: ${total}</Text>
        </Container>
      </Body>
    </Html>
  );
}

export default OrderConfirmationEmail;
```

## Variantes ou exceptions

- Les projets sans besoin d'e-mails peuvent se passer de React Email.
- Les templates très simples peuvent être écrits directement en HTML.

## Liens / Références

- [React Email Documentation](https://react.email/)
- [React Email Components](https://react.email/docs/components/html)
- [React Email Examples](https://react.email/examples)
