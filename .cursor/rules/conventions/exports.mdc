---
alwaysApply: false
description: Enforce named exports and the use of barrels (index.ts)
---

# Named Exports and Barrels

**Objective**: Enforce the use of named exports and barrels (`index.ts`) to simplify imports and improve maintainability.

**Context**: To apply for unifying code style and conventions.

## Explanation

Named exports and barrels allow you to:
- Make imports more readable and predictable
- Facilitate refactoring (renaming, moving)
- Simplify imports from features
- Avoid naming conflicts

**Rules:**

- **Named exports only**: never use `export default`.
- **Barrels (`index.ts`)**: use `index.ts` files to group exports.
- **Imports from the root**: import from the root of a feature via its barrel.

## Practical Implementation Example

**Named export vs default export:**

```tsx
// ❌ Bad: default export
export default function UserProfile() {
  return <div>Profile</div>;
}

// Import
import UserProfile from "./user-profile"; // Can be renamed arbitrarily
import Anything from "./user-profile"; // No TypeScript error

// ✅ Good: named export
export function UserProfile() {
  return <div>Profile</div>;
}

// Import
import { UserProfile } from "./user-profile"; // Fixed and predictable name
import { UserProfile as Profile } from "./user-profile"; // Explicit renaming
```

**Structure with barrels:**

```
features/calendar/
 ├─ components/
 │   ├─ calendar-grid.tsx       → export { CalendarGrid }
 │   ├─ calendar-event.tsx      → export { CalendarEvent }
 │   └─ index.ts                → export * from "./calendar-grid"
 ├─ hooks/
 │   ├─ use-calendar.ts         → export { useCalendar }
 │   └─ index.ts                → export * from "./use-calendar"
 ├─ services/
 │   ├─ calendar-api.ts         → export { fetchEvents, createEvent }
 │   └─ index.ts                → export * from "./calendar-api"
 ├─ types.ts                    → export type { CalendarEvent, CalendarFilters }
 └─ index.ts                    → export * from "./components"
                                  export * from "./hooks"
                                  export * from "./services"
                                  export * from "./types"
```

**Root barrel file of a feature:**

```ts
// features/calendar/index.ts
export * from "./components";
export * from "./hooks";
export * from "./services";
export * from "./types";
```

**Barrel file of a subdirectory:**

```ts
// features/calendar/components/index.ts
export { CalendarGrid } from "./calendar-grid";
export { CalendarEvent } from "./calendar-event";
export { CalendarHeader } from "./calendar-header";
```

**Import from another part of the code:**

```tsx
// ✅ Good: import from the root of the feature
import { CalendarGrid, useCalendar, fetchEvents } from "@/features/calendar";
import type { CalendarEvent } from "@/features/calendar";

// ❌ Bad: deep imports
import { CalendarGrid } from "@/features/calendar/components/calendar-grid";
import { useCalendar } from "@/features/calendar/hooks/use-calendar";
```

**Selective export:**

```ts
// features/calendar/index.ts
// Export only what should be public
export { CalendarGrid, CalendarEvent } from "./components";
export { useCalendar } from "./hooks";
export { fetchEvents } from "./services";
export type { CalendarEvent, CalendarFilters } from "./types";

// Don't export internal functions
// export { formatDate } from "./utils"; // ❌ Internal function
```

**Barrel with re-exports:**

```ts
// src/components/ui/index.ts
export { Button } from "./button";
export { Input } from "./input";
export { Dialog } from "./dialog";
export { Card, CardHeader, CardContent } from "./card";

// Simplified import
import { Button, Input, Dialog } from "@/components/ui";
```

**Export of types and values:**

```ts
// features/users/types.ts
export interface User {
  id: string;
  name: string;
  email: string;
}

export type UserRole = "admin" | "user";

export enum UserStatus {
  Active = "ACTIVE",
  Inactive = "INACTIVE",
}

// Import
import { User, UserRole, UserStatus } from "@/features/users";
import type { User } from "@/features/users"; // Type-only import
```

**Handling name conflicts:**

```ts
// features/calendar/index.ts
export { CalendarGrid as Grid } from "./components";
export { useCalendar as useCalendarState } from "./hooks";

// Import with renaming
import { Grid, useCalendarState } from "@/features/calendar";
```

**Export with namespace (optional):**

```ts
// features/calendar/index.ts
export * as Components from "./components";
export * as Hooks from "./hooks";
export * as Services from "./services";

// Import
import { Components, Hooks } from "@/features/calendar";

const grid = <Components.CalendarGrid />;
const { currentMonth } = Hooks.useCalendar();
```

## Variants or Exceptions

- Shadcn UI components can have default exports (inherited from the library).
- Next.js files (pages, layouts) use default exports by convention.
- Configuration files (`.config.ts`) can use default exports.

## Links / References

- [Why I Don't Use Default Exports](https://humanwhocodes.com/blog/2019/01/stop-using-default-exports-javascript-module/)
- [TypeScript Barrel Pattern](https://basarat.gitbook.io/typescript/main-1/barrel)
- Internal documentation: `references.md`
