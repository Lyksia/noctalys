---
id: utils/formatters
category: utils
title: Helpers de formatage visuel
status: draft
tags: [utils, formatters, display, ui]
---

# Helpers de formatage visuel

**Objectif** : Standardiser les helpers de formatage pour l'affichage utilisateur.
**Contexte** : À appliquer pour standardiser les helpers et fonctions partagées.

## Explication

Les formatters transforment les données brutes en formats lisibles pour l'utilisateur. Ils sont essentiels pour l'interface utilisateur et doivent être localisés et cohérents.

**Fonctions courantes :**

* **formatCurrency** : afficher les montants
* **formatDate / formatTime** : afficher les dates
* **formatFileSize** : afficher les tailles de fichier
* **formatPhoneNumber** : formater les numéros de téléphone
* **formatPercentage** : afficher les pourcentages
* **formatList** : formater des listes (avec virgules, "et")

## Exemple de mise en pratique

```ts
// src/utils/formatters/format-currency.ts

type CurrencyOptions = {
  locale?: string;
  currency?: string;
  showSymbol?: boolean;
};

/**
 * Formate un montant en devise
 * @param amountInCents - Montant en centimes
 * @param options - Options de formatage
 * @returns Montant formaté
 */
export function formatCurrency(
  amountInCents: number,
  options: CurrencyOptions = {}
): string {
  const { locale = 'fr-FR', currency = 'EUR', showSymbol = true } = options;

  return new Intl.NumberFormat(locale, {
    style: showSymbol ? 'currency' : 'decimal',
    currency,
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  }).format(amountInCents / 100);
}

// src/utils/formatters/format-file-size.ts

/**
 * Formate une taille de fichier
 * @param bytes - Taille en octets
 * @returns Taille formatée (ex: "1.5 MB")
 */
export function formatFileSize(bytes: number): string {
  if (bytes === 0) return '0 B';

  const units = ['B', 'KB', 'MB', 'GB', 'TB'];
  const k = 1024;
  const i = Math.floor(Math.log(bytes) / Math.log(k));

  return `${(bytes / Math.pow(k, i)).toFixed(2)} ${units[i]}`;
}

// src/utils/formatters/format-phone-number.ts

/**
 * Formate un numéro de téléphone français
 * @param phone - Numéro de téléphone
 * @returns Numéro formaté (ex: "06 12 34 56 78")
 */
export function formatPhoneNumber(phone: string): string {
  const cleaned = phone.replace(/\D/g, '');
  const match = cleaned.match(/^(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})$/);

  if (match) {
    return `${match[1]} ${match[2]} ${match[3]} ${match[4]} ${match[5]}`;
  }

  return phone;
}

// src/utils/formatters/format-percentage.ts

/**
 * Formate un pourcentage
 * @param value - Valeur (0-100)
 * @param decimals - Nombre de décimales
 * @returns Pourcentage formaté (ex: "75.5%")
 */
export function formatPercentage(value: number, decimals: number = 1): string {
  return `${value.toFixed(decimals)}%`;
}

// src/utils/formatters/format-list.ts

type ListFormatOptions = {
  locale?: string;
  type?: 'conjunction' | 'disjunction';
};

/**
 * Formate une liste d'éléments
 * @param items - Éléments à formater
 * @param options - Options de formatage
 * @returns Liste formatée (ex: "A, B et C")
 */
export function formatList(
  items: string[],
  options: ListFormatOptions = {}
): string {
  const { locale = 'fr-FR', type = 'conjunction' } = options;

  return new Intl.ListFormat(locale, { type }).format(items);
}

// src/utils/formatters/format-duration.ts

/**
 * Formate une durée en secondes
 * @param seconds - Durée en secondes
 * @returns Durée formatée (ex: "1h 30m")
 */
export function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = seconds % 60;

  const parts: string[] = [];
  if (hours > 0) parts.push(`${hours}h`);
  if (minutes > 0) parts.push(`${minutes}m`);
  if (secs > 0 || parts.length === 0) parts.push(`${secs}s`);

  return parts.join(' ');
}

// src/utils/formatters/format-initials.ts

/**
 * Génère les initiales d'un nom
 * @param name - Nom complet
 * @returns Initiales (ex: "AB" pour "Alice Bob")
 */
export function formatInitials(name: string): string {
  return name
    .split(' ')
    .map((part) => part.charAt(0).toUpperCase())
    .slice(0, 2)
    .join('');
}

// src/utils/formatters/index.ts
export { formatCurrency } from './format-currency';
export { formatFileSize } from './format-file-size';
export { formatPhoneNumber } from './format-phone-number';
export { formatPercentage } from './format-percentage';
export { formatList } from './format-list';
export { formatDuration } from './format-duration';
export { formatInitials } from './format-initials';
```

## Variantes ou exceptions

* Les formatages spécifiques métier peuvent être dans `features/[feature]/utils/`
* Pour des locales complexes, utiliser des librairies d'i18n
* Les formatages serveur-side peuvent différer (sécurité, précision)

## Liens / Références

* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl
* https://formatjs.io/
* Documentation interne : `/docs/utils.md`
